<!DOCTYPE html>
<html lang="en">
  <head>
    {% include head.html %}
    <style>
      article ul, article ol {
        padding-left: 40px;
      }
      
      ul.task-list {
        list-style-type: none;
      }

      article a {
        color: #0b00a3!important;
        text-decoration: underline;
        font-weight: bolder;
      }

      h1 {
        color: #fb4934;
      }

      ::selection {
        background-color: #fbf434bd;
      }

      ::-moz-selection {
        background-color: #fbf434bd;
      }

      .highlight-h2 {
        background-color: #fbf434bd;
        padding: 0.5rem;
        border-left: 4px solid #fbf434;
        transition: all 0.3s ease;
      }

      div.highlighter-rouge {
        position: relative;
        margin: 1rem 0;
      }

      .highlight {
          width: 100%;
          border-radius: 6px;
          padding: 16px;
          overflow-x: auto;
      }

      .highlight pre {
          margin: 0;
          overflow-x: auto;
      }

      /* Show scrollbar by default */
      .highlight pre::-webkit-scrollbar {
          height: 8px;
      }

      .highlight pre::-webkit-scrollbar-track {
          background: #eff1f2;
      }

      .highlight pre::-webkit-scrollbar-thumb {
          background: #888;
          border-radius: 4px;
      }

      .highlight pre::-webkit-scrollbar-thumb:hover {
          background: #555;
      }

      /* Syntax colors */
      .highlight .k { color: #d73a49; } /* keywords */
      .highlight .nf { color: #6f42c1; } /* function names */
      .highlight .p { color: #24292e; } /* punctuation */
      .highlight .n { color: #24292e; } /* names */
      .highlight .c1 { color: #6a737d; font-style: italic; } /* comments */
      .highlight .s1, .highlight .s2 { color: #032f62; } /* strings */

      .copy-code-button {
          position: absolute;
          top: 8px;
          right: 8px;
          padding: 4px 12px;
          background: #0b00a3;
          color: white;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-size: 12px;
          z-index: 1;
      }

      .copy-code-button:hover {
          background: #0256c7;
      }
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  </head>
  <body>
    <header class="border-bottom-thick px-2 clearfix" style="background: linear-gradient(135deg, #fb4934 0%, #df3d2b 100%); color: white;">
      <div class="left sm-width-full py-1 mt-1 mt-lg-0">
        <a class="align-middle link-primary text-accent" href="{{ site.baseurl }}/" style="color: white;">
          <i class="bi bi-house-fill"></i> {{ site.title }}
        </a>
      </div>
    </header>

    <div>
      <article class="container px-2 mx-auto mb4" itemscope itemtype="http://schema.org/BlogPosting">
        <h1 class="h0 col-11 sm-width-full py-4 mt-3 inline-block" itemprop="name headline"
          style="background-color: #fb4934; color: white; font-size: 8em;">{{ page.title }}</h1>
        <div class="col-11 sm-width-full mt-1 border-top-thin ">
          <div class="clearfix py-1 prose-y-default">
            <div itemprop="articleBody">
              {{ content }}
            </div>
          </div>
        </div>
      </article>
    </div>
  </body>
  <script>
  let scrollTimeout;
  let isScrolling = false;

  function findClosestH2ToCenter() {
      const viewportCenter = window.innerHeight / 2;
      const h2Elements = document.querySelectorAll('h2');
      
      let closestH2 = null;
      let minDistance = Infinity;
      
      h2Elements.forEach(h2 => {
          const rect = h2.getBoundingClientRect();
          const h2Center = rect.top + (rect.height / 2);
          const distance = Math.abs(h2Center - viewportCenter);
          
          if (distance < minDistance) {
              minDistance = distance;
              closestH2 = h2;
          }
      });
      
      // Remove highlight from all h2s
      h2Elements.forEach(h2 => h2.classList.remove('highlight-h2'));
      
      // Add highlight to closest h2
      if (closestH2) {
          closestH2.classList.add('highlight-h2');
      }
  }

  // Throttled scroll handler
  window.addEventListener('scroll', function() {
      if (!isScrolling) {
          isScrolling = true;
          
          clearTimeout(scrollTimeout);
          scrollTimeout = setTimeout(function() {
              findClosestH2ToCenter();
              isScrolling = false;
          }, 100); // 100ms delay - adjust as needed
      }
  });

  document.addEventListener('DOMContentLoaded', () => {
    // Run once on DOM load
    findClosestH2ToCenter();

    // Find all code blocks
    const codeBlocks = document.querySelectorAll('div.highlighter-rouge');
    
    codeBlocks.forEach(function(codeBlock) {
        // Create copy button
        const copyButton = document.createElement('button');
        copyButton.className = 'copy-code-button';
        copyButton.innerHTML = '<i class="bi bi-clipboard-plus"></i> Copy';
        
        // Insert button at the top of the code block
        codeBlock.style.position = 'relative';
        codeBlock.insertBefore(copyButton, codeBlock.firstChild);
        
        // Add click handler
        copyButton.addEventListener('click', function() {
            const code = codeBlock.querySelector('code').textContent;
            navigator.clipboard.writeText(code).then(function() {
                copyButton.innerHTML = '<i class="bi bi-clipboard-check"></i> Copied';
                setTimeout(function() {
                    copyButton.innerHTML = '<i class="bi bi-clipboard-plus"></i> Copy';
                }, 2000);
            });
        });
    });
  });
  </script>
</html>