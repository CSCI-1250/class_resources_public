<!DOCTYPE html>
<html lang="en">
  <head>
    {% include head.html %}
    <style>
      article ul, article ol {
        padding-left: 40px;
      }
      
      ul.task-list {
        list-style-type: none;
      }

      article a {
        color: #0b00a3!important;
        text-decoration: underline;
        font-weight: bolder;
      }
      h1 {
        color: #fb4934;
      }
      ::selection {
        background-color: #fbf434bd;
      }

      ::-moz-selection {
        background-color: #fbf434bd;
      }
      .highlight-h2 {
        background-color: #fbf434bd;
        padding: 0.5rem;
        border-left: 4px solid #fbf434;
        transition: all 0.3s ease;
    }
    </style>
    /* Dark red syntax highlighting */
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
  </head>
  <body>
    <header class="border-bottom-thick px-2 clearfix" style="background: linear-gradient(135deg, #fb4934 0%, #df3d2b 100%); color: white;">
      <div class="left sm-width-full py-1 mt-1 mt-lg-0">
        <a class="align-middle link-primary text-accent" href="{{ site.baseurl }}/" style="color: white;">
          {{ site.title }}
        </a>
      </div>
    </header>

    <div>
      <article class="container px-2 mx-auto mb4" itemscope itemtype="http://schema.org/BlogPosting">
        <h1 class="h0 col-11 sm-width-full py-4 mt-3 inline-block" itemprop="name headline"
          style="background-color: #fb4934; color: white; font-size: 8em;">{{ page.title }}</h1>
        <div class="col-11 sm-width-full mt-1 border-top-thin ">
          <div class="clearfix py-1 prose-y-default">
            <div itemprop="articleBody">
              {{ content }}
            </div>
          </div>
        </div>
      </article>
    </div>
  </body>
  <script>
  let scrollTimeout;
  let isScrolling = false;

  function findClosestH2ToCenter() {
      const viewportCenter = window.innerHeight / 2;
      const h2Elements = document.querySelectorAll('h2');
      
      let closestH2 = null;
      let minDistance = Infinity;
      
      h2Elements.forEach(h2 => {
          const rect = h2.getBoundingClientRect();
          const h2Center = rect.top + (rect.height / 2);
          const distance = Math.abs(h2Center - viewportCenter);
          
          if (distance < minDistance) {
              minDistance = distance;
              closestH2 = h2;
          }
      });
      
      // Remove highlight from all h2s
      h2Elements.forEach(h2 => h2.classList.remove('highlight-h2'));
      
      // Add highlight to closest h2
      if (closestH2) {
          closestH2.classList.add('highlight-h2');
      }
  }

  // Throttled scroll handler
  window.addEventListener('scroll', function() {
      if (!isScrolling) {
          isScrolling = true;
          
          clearTimeout(scrollTimeout);
          scrollTimeout = setTimeout(function() {
              findClosestH2ToCenter();
              isScrolling = false;
          }, 100); // 100ms delay - adjust as needed
      }
  });

  // Run once on page load
  findClosestH2ToCenter();
  </script>
</html>